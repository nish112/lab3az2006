on: 

  workflow_dispatch:

jobs:
  # JOB 1: Base setup (Sequential Start)
  check-bats-version:
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout Code"
        uses: actions/checkout@v4
      
      - name: "Setup Node.js"
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: "Install Bats"
        run: npm install -g bats
      
      - name: "Check Version"
        run: bats -v

  # JOB 2: Runs in PARALLEL with the first job
  parallel-analysis:
    runs-on: ubuntu-latest
    steps:
      - name: "Running Parallel Check"
        run: echo "This job runs at the same time as check-bats-version"

  # JOB 3: Runs SEQUENTIALLY (only after Job 1 and Job 2 finish)
  final-report:
    runs-on: ubuntu-latest
    needs: [check-bats-version, parallel-analysis]
    steps:
      - name: "Final Summary"
        run: echo "This job waited for both previous jobs to complete successfully."
